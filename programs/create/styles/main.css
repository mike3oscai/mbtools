/* ===== Create Program (vista) =========================================== */

/* Ancho máximo deseado para la tabla amplia (puedes subir a 1760px) */
:root { --page-max: 1600px; }

/* Enlaces */
.back-link { color: var(--accent); text-decoration: none; }

/* ---------- Formulario (card superior) ---------- */
#program-form {
  display: grid;
  grid-template-columns: 220px 1fr; /* label | control */
  gap: 12px 16px;
}

.form-row { display: contents; }
.form-label { align-self: center; color: var(--muted); font-weight: 600; }

.form-control {
  width: 100%;
  height: 40px;
  padding: 0 .8rem;
  border: 1px solid var(--card-border);
  border-radius: 10px;
  background: var(--bg);
  color: var(--fg);
}
.form-control:focus {
  border-color: var(--accent);
  box-shadow: 0 0 0 3px var(--card-hover);
}
input[type="number"]{ text-align: right; }

@media (max-width: 900px){
  #program-form { grid-template-columns: 1fr; }
}

/* Multiselect de PN cómodo */
#fld-pn.form-control[multiple]{
  height: auto;
  min-height: 360px;
  padding: .5rem;
  line-height: 1.2;
}

/* ---------- Cards base ---------- */
.card { position: relative; z-index: 0; margin: 24px auto; }

/* Filtro/selección de productos (altura y ancho razonables) */
#productsSection{
  max-width: 1000px;
  width: min(1000px, 94vw);
  margin-inline: auto;
}

/* ---------- Selected products (tabla ancha sin scroll) ---------- */
#selectedProductsCard{
  /* se centra respecto al viewport y no depende del ancho del .container */
  width: min(var(--page-max), 98vw);
  max-width: var(--page-max);
  margin-inline: auto;
  overflow: visible;
  padding-bottom: 16px;
  z-index: 3;
}

/* El wrapper de la tabla NO genera scroll horizontal */
#selectedProductsCard .scroll{
  overflow-x: hidden;
  overflow-y: visible;
}

/* Tabla fluida y predecible */
#productsTable{
  width: 100%;
  border-collapse: collapse;
  table-layout: fixed;      /* reparte ancho entre columnas */
}

#productsTable th,
#productsTable td{
  padding: .65rem .55rem;
  border-top: 1px solid var(--card-border);
  text-align: center;
  white-space: normal;      /* permite saltos de línea */
  word-break: break-word;   /* rompe textos largos si hace falta */
}

#productsTable thead th{
  border-top: 0;
  border-bottom: 1px solid var(--card-border);
  font-weight: 600;
}

#productsTable td[data-col="desc"]{
  min-width: 200px;
  text-align: left;
}

/* Inputs/selects no fuerzan ancho mínimo (clave para no scrollear) */
#productsTable input.form-control,
#productsTable select.form-control{
  min-width: 0;
  width: 100%;
  max-width: 140px;
  text-align: center;
}

/* Reparto de columnas pensado para ~1600px (ajusta si quieres) */
#productsTable th:nth-child(1),  #productsTable td:nth-child(1){  width: 8%;  } /* PN */
#productsTable th:nth-child(2),  #productsTable td:nth-child(2){  width: 20%; } /* Description */
#productsTable th:nth-child(3),  #productsTable td:nth-child(3){  width: 10%; } /* RRP */
#productsTable th:nth-child(4),  #productsTable td:nth-child(4){  width: 11%; } /* Promo RRP */
#productsTable th:nth-child(5),  #productsTable td:nth-child(5){  width: 14%; } /* Calc RRP - VAT */
#productsTable th:nth-child(6),  #productsTable td:nth-child(6){  width: 12%; } /* FE - Rebate */
#productsTable th:nth-child(7),  #productsTable td:nth-child(7){  width: 9%;  } /* Max Qty */
#productsTable th:nth-child(8),  #productsTable td:nth-child(8){  width: 10%; } /* Total Rebate */
#productsTable th:nth-child(9),  #productsTable td:nth-child(9){  width: 14%; } /* Program Number */
#productsTable th:nth-child(10), #productsTable td:nth-child(10){ width: 8%;  } /* Actions */

/* Badge de FE compacto */
.fe-badge{
  display: inline-block;
  padding: .2rem .55rem;
  border-radius: 9999px;
  font-size: .85rem;
  font-weight: 600;
  background: #eef6ff;
  color: #0b5cab;
  border: 1px solid #dbe7ff;
  white-space: nowrap;
}

/* Alineación del botón Save dentro de la tarjeta */
#selectedProductsCard .actions-row{
  display: flex;
  justify-content: flex-end;
  margin-top: 1rem;
}

/* ===== UX: Program header más cómodo en 2 columnas ===== */

/* La tarjeta usa el mismo ancho que la de Selected products */
.form-card{
  width: min(var(--page-max), 73.4vw);
  max-width: var(--page-max);
  margin-inline: auto;
}

/* Dos columnas fluidas y con más aire entre ellas */
.form-card .form-columns{
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr)); /* 2 columnas flexibles */
  gap: 28px 40px;                                   /* fila x columna */
  align-items: start;
}

/* Cada columna: label a la izquierda (fijo) y control el resto */
.form-card .field-grid{
  display: grid;
  grid-template-columns: 160px minmax(0, 1fr); /* label | control */
  gap: 12px 16px;
}

/* Labels más consistentes */
.form-card .form-label{
  align-self: center;
  color: var(--muted);
  font-weight: 600;
  line-height: 1.2;
  padding-top: 2px;
}

/* Controles ocupan el 100% del espacio disponible */
.form-card select.form-control,
.form-card input.form-control{
  width: 100%;
  min-width: 0;          /* evita que el input empuje la columna */
  height: 44px;
}

/* Botones alineados a la derecha y con buen espaciado */
.form-card .actions-row{
  grid-column: 1 / -1;   /* ocupa las dos columnas */
  display: flex;
  justify-content: flex-end;
  gap: .75rem;
  margin-top: .5rem;
}

/* Responsive: apilar columnas en pantallas más estrechas */
@media (max-width: 1200px){
  .form-card .form-columns{ grid-template-columns: 1fr; }
}
/* === Program header: grid de 4 columnas (label|control|label|control) === */
.form-card{
  width: min(var(--page-max), 98vw);
  max-width: var(--page-max);
  margin-inline: auto;
}

.form-card .header-grid{
  display: grid;
  grid-template-columns: 160px minmax(0,1fr) 160px minmax(0,1fr);
  gap: 14px 18px; /* filas x columnas */
  align-items: center;
}

.form-card .form-label{
  color: var(--muted);
  font-weight: 600;
  line-height: 1.2;
}

.form-card select.form-control,
.form-card input.form-control{
  width: 100%;
  min-width: 0;   /* ¡clave! evita que el input empuje la malla */
  height: 44px;
}

/* Fila de acciones ocupa las 4 columnas y alinea a la derecha */
.form-card .actions-row{
  grid-column: 1 / -1;
  display: flex;
  justify-content: flex-end;
  gap: .75rem;
  margin-top: .25rem;
}

/* Responsive: apilar en una sola columna en pantallas estrechas */
@media (max-width: 1100px){
  .form-card .header-grid{
    grid-template-columns: 160px minmax(0,1fr);
  }
}
/* --- Override: neutralizar la grid antigua del <form> --- */
#program-form{
  display: block !important;              /* deja de ser grid (220px|1fr) */
  grid-template-columns: unset !important;
  gap: 0 !important;
}

/* Asegurar que la malla de 4 columnas manda y ocupa todo el ancho */
#program-form .header-grid{
  display: grid !important;
  grid-template-columns: 160px minmax(0,1fr) 160px minmax(0,1fr) !important;
  gap: 14px 18px;
  align-items: center;
  width: 100%;
}

#program-form .actions-row{
  grid-column: 1 / -1;
  display: flex;
  justify-content: flex-end;
  gap: .75rem;
  margin-top: .25rem;
}

/* Controles a 100% sin empujar columnas */
#program-form select.form-control,
#program-form input.form-control{
  width: 100%;
  min-width: 0;
  height: 44px;
}
